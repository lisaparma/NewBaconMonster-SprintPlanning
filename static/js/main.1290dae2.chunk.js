(this["webpackJsonpScrambledEggs-SprintPlanning"]=this["webpackJsonpScrambledEggs-SprintPlanning"]||[]).push([[0],{23:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),i=a(5),l=a(11),s={info:{teamName:"Scrambled Eggs",date:Date.now()},mates:{cataldo:{name:"Cataldo",d:10,h:0,efficiency:50},lisa:{name:"Lisa",d:6,h:0,efficiency:80},dennis:{name:"Dennis",d:10,h:0,efficiency:80},beatrice:{name:"Beatrice",d:10,h:0,efficiency:80},davideP:{name:"Davide P.",d:10,h:0,efficiency:30},alberto:{name:"Alberto",d:10,h:0,efficiency:80},federico:{name:"Federico",d:10,h:0,efficiency:80},niccolo:{name:"Niccol\xf2",d:6,h:0,efficiency:80},noman:{name:"Noman",d:10,h:0,efficiency:80},perla:{name:"Perla",d:5,h:0,efficiency:80}},groups:{frontend:{name:"Front-end",mates:["cataldo","lisa","dennis","beatrice"],emergency:20},backend:{name:"Back-end",mates:["davideP","alberto","federico","niccolo","perla","noman"],emergency:20}}},u=a(4),m=a(1),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEAM":return Object(m.a)({},t.mates);case"SET_DAYS":var a=Object(m.a)({},e[t.id]);return a.d=t.days,Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.id,a));case"SET_HOURS":var n=Object(m.a)({},e[t.id]);return n.h=t.hours,Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.id,n));case"SET_EFFICIENCY":var r=Object(m.a)({},e[t.id]);return r.efficiency=t.efficiency,Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.id,r));case"ADD_MATE":var c=Object(m.a)({},e);return c[t.id]={name:t.name,d:0,h:0,efficiency:100},Object(m.a)({},c);case"DELETE_MATE":var o=Object(m.a)({},e);return delete o[t.id],Object(m.a)({},o);default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEAM":return Object(m.a)({},t.info);default:return e}},p=a(2),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEAM":return Object(m.a)({},t.groups);case"SET_EMERGENCY":var a=Object(m.a)({},e[t.groupId]);return a.emergency=t.emergency,Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.groupId,a));case"ADD_MATE":var n=Object(m.a)({},e[t.groupId]);return n.mates.push(t.id),Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.groupId,n));case"DELETE_MATE":var r=Object(m.a)({},e);return Object(p.forEach)(r,(function(e,a){Object(p.remove)(e.mates,(function(e){return e===t.id})),0===e.mates.length&&delete r[a]})),Object(m.a)({},r);default:return e}};var h=a(6),g=a(7),v=a(9),y=a(8),O=a(3),b=a.n(O),N=a(12),j=a.n(N),C=(a(23),a(48),a(49),function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._onChangeD=function(t){var a=t.target.value?parseFloat(t.target.value):parseFloat(0);0<=a&&e.props.setDays(e.props.id,a)},e._onChangeH=function(t){var a=t.target.value?parseFloat(t.target.value):parseFloat(0);0<=a&&e.props.setHours(e.props.id,a)},e._onChangeEff=function(t){var a=t.target.value?parseFloat(t.target.value):parseFloat(0);0<=a&&a<=100&&e.props.setEfficiency(e.props.id,a)},e._onMinusClick=function(){return e.props.deleteMate(e.props.id)},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.mate,a=e.edit,n=(8*t.d+t.h)*t.efficiency/100*(100-this.props.emergency)/100;return r.a.createElement("div",{className:"teammate"},r.a.createElement("div",{className:"column"},a&&r.a.createElement(b.a,{iconName:"times",className:"minus",onClick:this._onMinusClick}),t.name,r.a.createElement("span",{className:"hours4every"},"(",parseInt(n)," h)")),r.a.createElement("div",{className:"column"},r.a.createElement("input",{type:"number",defaultValue:t.d,min:0,max:100,onChange:this._onChangeD}),r.a.createElement("span",null,"d"),r.a.createElement("input",{type:"number",defaultValue:t.h,min:0,max:100,onChange:this._onChangeH}),r.a.createElement("span",null,"h")),r.a.createElement("div",{className:"column"},r.a.createElement("input",{type:"number",defaultValue:t.efficiency,min:0,max:100,onChange:this._onChangeEff}),r.a.createElement("span",null,"%")))}}]),a}(r.a.Component)),M=Object(i.b)((function(e,t){return{mate:e.mates[t.id]}}),(function(e){return{setDays:function(t,a){return e(function(e,t){return{type:"SET_DAYS",id:e,days:t}}(t,a))},setHours:function(t,a){return e(function(e,t){return{type:"SET_HOURS",id:e,hours:t}}(t,a))},setEfficiency:function(t,a){return e(function(e,t){return{type:"SET_EFFICIENCY",id:e,efficiency:t}}(t,a))},deleteMate:function(t){return e(function(e){return{type:"DELETE_MATE",id:e}}(t))}}}))(C),S=a(25),_=a.n(S);function w(e,t,a){var n=0;return Object(p.forEach)(t,(function(t){if(e[t]){var a=e[t],r=(a.h+8*a.d)*a.efficiency/100;n+=r}})),n*(100-a)/100}function T(e,t){var a=document.getElementById(e).clientWidth+10,n=document.getElementById(e).clientHeight+5,r=window.scrollY;window.scrollTo(0,0);var c=_()(document.querySelector("#".concat(e)),{width:a,height:n});return window.scrollTo(0,r),c.then((function(a){var n=a.toDataURL();if(!t)return n;var r=document.createElement("a"),c=new Date;r.download="sprintPlanning_".concat(e,"_").concat(c.getFullYear(),"-").concat(c.getMonth()+1,"-").concat(c.getDate()),r.href=n,r.click()}))}a(50);function D(e){var t=e.isModalOpen,a=e.closeModal,n=e.screenshot;return r.a.createElement(j.a,{className:"screenshotModal",overlayClassName:"overlayScreenshotModal",isOpen:t,onClose:a,onRequestClose:a},r.a.createElement(b.a,{iconName:"times",className:"closeScreenshotModal",onClick:a}),r.a.createElement("img",{src:n,alt:"generated screenshot"}))}var k=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).inputRef=r.a.createRef(),e.state={editMode:!1,image:null,isModalOpen:!1},e._onChangeEmergency=function(t){var a=t.target.value?parseFloat(t.target.value):parseFloat(0);0<=a&&a<=100&&e.props.setEmergency(e.props.groupId,a)},e._editMode=function(){e.setState((function(e){return{editMode:!e.editMode}}))},e._onKeyDown=function(t){"Enter"===t.key&&e._onPlusClick()},e._showScreenshot=function(t){T(t,!1).then((function(t){e.setState({image:t}),e.setState({isModalOpen:!0})}))},e._onPlusClick=function(){for(var t=e.inputRef.current.value.toLocaleLowerCase();Object(p.find)(e.props.allMates,(function(e,a){return a===t}));)t+="_";e.props.addMate(t,e.inputRef.current.value,e.props.groupId),e.inputRef.current.value=""},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.editMode,n=t.inputName,c=this.props,o=c.mates,i=c.name,l=c.emergency,s=c.allMates,u=[];Object(p.forEach)(o,(function(e){Object(p.find)(s,(function(t,a){return a===e}))&&u.push(r.a.createElement(M,{key:e,id:e,edit:a,emergency:l}))}));var m=w(s,o,l);return r.a.createElement("div",{id:i.toLowerCase().replace("-",""),className:"hoursPlanning"},r.a.createElement("div",{className:"title-end"},r.a.createElement("h3",null,i),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(b.a,{iconName:"download",className:"icon",onClick:function(){return T(i.toLowerCase().replace("-",""),!0)}}),r.a.createElement(b.a,{iconName:"camera",className:"icon",onClick:function(){return e._showScreenshot(i.toLowerCase().replace("-",""))}}),r.a.createElement(b.a,{iconName:"pencil-alt",className:"icon",onClick:this._editMode}))),r.a.createElement("div",{className:"tableHeader"},r.a.createElement("span",{className:"column name"},"Nome"),r.a.createElement("span",{className:"column"},"Ore lavorative"),r.a.createElement("span",{className:"column"},"Efficienza"),r.a.createElement("span",{className:"column"},"Emergenza")),r.a.createElement("div",{className:"tableContent"},r.a.createElement("div",{className:"team"},u),r.a.createElement("div",{className:"column emergency"},r.a.createElement("span",null,"-"),r.a.createElement("input",{type:"number",defaultValue:l,min:0,max:100,onChange:this._onChangeEmergency}),r.a.createElement("span",null,"%"))),a&&r.a.createElement("div",{className:"add"},r.a.createElement(b.a,{iconName:"plus-circle",className:"plus",onClick:this._onPlusClick}),r.a.createElement("input",{type:"text",value:n,ref:this.inputRef,onKeyDown:this._onKeyDown})),r.a.createElement("div",{className:"total"},r.a.createElement("p",null,"Totale: ",parseInt(m)," h")),r.a.createElement(D,{isModalOpen:this.state.isModalOpen,closeModal:function(){return e.setState({isModalOpen:!1})},screenshot:this.state.image}))}}]),a}(r.a.Component),I=Object(i.b)((function(e,t){return{allMates:e.mates,name:e.groups[t.groupId].name,mates:e.groups[t.groupId].mates,emergency:e.groups[t.groupId].emergency,date:e.info.date}}),(function(e){return{setEmergency:function(t,a){return e(function(e,t){return{type:"SET_EMERGENCY",groupId:e,emergency:t}}(t,a))},addMate:function(t,a,n){return e(function(e,t,a){return{type:"ADD_MATE",id:e,name:t,groupId:a}}(t,a,n))}}}))(k),A=a.p+"static/media/egg.ef2d65bb.png";function R(e){var t=new Date(e.date);return r.a.createElement("div",{className:"heading"},r.a.createElement("img",{src:A,alt:"egg"}),r.a.createElement("div",null,r.a.createElement("h1",null,e.teamName),r.a.createElement("h2",null,"Sprint Planning"),r.a.createElement("h3",null,"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()))),r.a.createElement("img",{src:A,alt:"egg"}))}j.a.setAppElement("#root");var F=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).fileRef=r.a.createRef(),e.fileReader=new FileReader,e.state={fileJSON:null,image:null,isModalOpen:!1},e._importClick=function(){return e.fileRef.current.click()},e._onChangeFile=function(t){t.stopPropagation(),t.preventDefault();var a=t.target.files[0];e.fileReader.readAsText(a)},e._showScreenshot=function(){T("print",!1).then((function(t){e.setState({image:t}),e.setState({isModalOpen:!0})}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fileReader.onload=function(t){try{var a=JSON.parse(t.target.result);e.setState((function(){return{fileJSON:a}}))}catch(n){console.error(n)}},this.fileReader.onerror=function(e){return console.error(e)}}},{key:"componentWillUpdate",value:function(e,t,a){if(this.state.fileJSON!==t.fileJSON)if(t.fileJSON.hasOwnProperty("people")){var n=function(e){var t={teamName:e.teamName||"DreamTeam",date:e.date||Date.now()},a=e.people,n={};if(e.hasOwnProperty("groups"))n=e.groups;else{var r=[];Object(p.forEach)(a,(function(e,t){return r.push(t)})),n={group1:{name:e.teamName||"Team",mates:r,emergency:0}}}return{info:t,groups:n,mates:a}}(t.fileJSON),r=n.info,c=n.groups,o=n.mates;this.props.setTeam(r,c,o)}else console.error("Invalid json")}},{key:"render",value:function(){var e=this,t=this.props,a=t.teamName,c=t.groups,o=t.mates,i=t.date,l=Object(p.map)(c,(function(e,t){return r.a.createElement(I,{groupId:t,key:t})})),s=0;return Object(p.forEach)(c,(function(e){s+=w(o,e.mates,e.emergency)})),r.a.createElement("div",{className:"page",id:"print"},r.a.createElement(R,{teamName:a,date:i}),r.a.createElement("div",{className:"actionIcons"},r.a.createElement("div",{className:"action",onClick:this._importClick},r.a.createElement(b.a,{iconName:"upload",className:"actionIcon"}),r.a.createElement("span",null,"Upload JSON"),r.a.createElement("input",{type:"file",accept:".json",ref:this.fileRef,style:{display:"none"},onChange:this._onChangeFile})),r.a.createElement("div",{className:"action",onClick:this._showScreenshot},r.a.createElement(b.a,{iconName:"camera",className:"actionIcon"}),r.a.createElement("span",null,"Show PNG")),r.a.createElement("div",{className:"action",onClick:function(){return T("print",!0)}},r.a.createElement(b.a,{iconName:"download",className:"actionIcon"}),r.a.createElement("span",null,"Download as PNG"))),r.a.createElement("div",{className:"sprintPlanning"},r.a.createElement(n.Fragment,null,l),r.a.createElement("div",{className:"recap"},"Totale: ",parseInt(s)," h")),r.a.createElement(D,{isModalOpen:this.state.isModalOpen,closeModal:function(){return e.setState({isModalOpen:!1})},screenshot:this.state.image}))}}]),a}(r.a.Component),P=Object(i.b)((function(e){return{teamName:e.info.teamName,mates:e.mates,groups:e.groups,date:e.info.date}}),(function(e){return{setTeam:function(t,a,n){return e(function(e,t,a){return{type:"SET_TEAM",info:e,groups:t,mates:a}}(t,a,n))}}}))(F);var J=function(){var e=function(){var e=Object(l.b)({info:f,mates:d,groups:E});return Object(l.c)(e,s)}();return r.a.createElement(i.a,{store:e},r.a.createElement(P,null))};a(51);o.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.1290dae2.chunk.js.map